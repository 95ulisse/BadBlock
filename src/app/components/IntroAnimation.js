import React, { Component, PropTypes } from 'react';
import autobind from 'autobind-decorator';

import Timeline from '../../util/Timeline';

import styles from './IntroAnimation.scss';

export default class IntroAnimation extends Component {

    static propTypes = {
        onPlayClick: PropTypes.func.isRequired
    };

    @autobind
    startOutroAnimation() {
        const { _svg } = this;
        const { onPlayClick } = this.props;

        if (!_svg) {
            return;
        }

        // Creates a new timeline describing the outro animation
        // and immediately starts it. At the end of the animation,
        // call the event handler.
        new Timeline()
            .styleTo(_svg, 'opacity', 0, 1000)
            .start()
            .on('end', () => onPlayClick());
    }

    render() {
        return (
            <svg width="640" height="480" viewBox="0 0 640 480" ref={c => this._svg = c}>

                <g className={styles['title-logo']}>

                    {/* The block itself */}
                    <rect className={styles['title-block']} x="231.55635" y="151.55635" width="176.8873" height="176.8873" />

                    {/* BAD */}
                    <g className={styles['title-group1']}>
                        <path className={styles['title-letter']}
                            d="m 105.29234,225.91501 0,8.19 13.05,0 q 1.8,0 2.7,-1.35 0.9,-1.35 0.9,-3.06 0,-1.44 -0.9,-2.61 -0.81,-1.17 -2.7,-1.17 l -13.05,0 z m 0,20.97 0,7.2 13.05,0 q 1.89,0 2.7,-1.17 0.9,-1.17 0.9,-2.43 0,-1.35 -0.9,-2.43 -0.81,-1.17 -2.7,-1.17 l -13.05,0 z m -16.739997,-29.79 q 0,-8.82 7.92,-8.82 l 27.629997,0 q 3.33,0 5.85,1.44 2.52,1.35 4.23,3.69 1.71,2.25 2.52,5.22 0.9,2.97 0.9,6.03 0,5.4 -2.34,9.54 -2.25,4.05 -7.11,5.13 2.43,0.27 4.32,1.62 1.98,1.35 3.33,3.51 1.35,2.16 2.07,4.95 0.81,2.79 0.81,5.85 0,3.33 -0.9,6.3 -0.9,2.97 -2.79,5.22 -1.89,2.25 -4.95,3.6 -2.97,1.26 -7.11,1.26 l -26.009997,0 q -8.37,0 -8.37,-8.91 l 0,-45.63 z" />
                        <path className={styles['title-letter']}
                            d="m 142.55656,271.63501 0,0 z m 58.32,-11.52 q 0.36,0.9 0.45,1.8 0.18,0.9 0.18,1.62 0,1.98 -0.81,3.6 -0.81,1.53 -2.16,2.61 -1.35,1.08 -3.06,1.71 -1.71,0.54 -3.51,0.54 -5.13,0 -7.47,-5.67 l -1.26,-3.06 -22.23,0 -1.44,3.06 q -2.7,5.67 -7.74,5.67 -1.8,0 -3.51,-0.63 -1.62,-0.63 -2.88,-1.8 -1.26,-1.17 -2.07,-2.7 -0.81,-1.62 -0.81,-3.51 0,-0.81 0,-1.62 0.09,-0.81 0.54,-1.62 l 9.63,-21.33 q 1.26,-2.88 3.24,-4.32 1.98,-1.44 4.41,-1.44 1.89,0 3.51,0.63 1.71,0.63 2.97,1.8 1.35,1.17 2.07,2.7 0.81,1.53 0.81,3.24 0,1.98 -0.63,3.51 l -0.99,2.34 8.55,0 -11.43,-27.27 q -0.45,-0.99 -0.54,-1.8 -0.09,-0.81 -0.09,-1.62 0,-1.89 0.72,-3.42 0.81,-1.53 2.07,-2.7 1.35,-1.17 2.97,-1.8 1.62,-0.63 3.42,-0.63 2.52,0 4.5,1.44 2.07,1.44 3.33,4.32 l 19.26,46.35 z" />
                        <path className={styles['title-letter']}
                            d="m 206.93891,271.63501 0,0 z m 17.46,-17.64 6.93,0 q 3.06,0 5.67,-0.99 2.7,-0.99 4.68,-2.79 1.98,-1.8 3.06,-4.41 1.17,-2.61 1.17,-5.85 0,-3.24 -1.08,-5.76 -1.08,-2.61 -3.06,-4.41 -1.98,-1.89 -4.68,-2.79 -2.61,-0.99 -5.85,-0.99 l -6.84,0 0,27.99 z m -17.46,-36.9 q 0,-1.62 0.63,-3.15 0.72,-1.62 1.89,-2.88 1.26,-1.26 2.88,-1.98 1.71,-0.81 3.69,-0.81 l 13.86,0 q 7.83,0 14.04,2.52 6.3,2.52 10.62,6.84 4.41,4.32 6.75,10.08 2.43,5.67 2.43,12.06 0,6.75 -2.43,12.51 -2.43,5.67 -6.75,9.9 -4.32,4.14 -10.35,6.66 -5.94,2.43 -12.96,2.79 l -15.21,0 q -4.32,0 -6.75,-2.34 -2.34,-2.34 -2.34,-6.48 l 0,-45.72 z" />
                    </g>

                    {/* BLOCK */}
                    <g className={styles['title-group2']}>
                        <path className={styles['title-letter']}
                            d="m 284.58922,225.91501 0,8.19 13.05,0 q 1.8,0 2.7,-1.35 0.9,-1.35 0.9,-3.06 0,-1.44 -0.9,-2.61 -0.81,-1.17 -2.7,-1.17 l -13.05,0 z m 0,20.97 0,7.2 13.05,0 q 1.89,0 2.7,-1.17 0.9,-1.17 0.9,-2.43 0,-1.35 -0.9,-2.43 -0.81,-1.17 -2.7,-1.17 l -13.05,0 z m -16.74,-29.79 q 0,-8.82 7.92,-8.82 l 27.63,0 q 3.33,0 5.85,1.44 2.52,1.35 4.23,3.69 1.71,2.25 2.52,5.22 0.9,2.97 0.9,6.03 0,5.4 -2.34,9.54 -2.25,4.05 -7.11,5.13 2.43,0.27 4.32,1.62 1.98,1.35 3.33,3.51 1.35,2.16 2.07,4.95 0.81,2.79 0.81,5.85 0,3.33 -0.9,6.3 -0.9,2.97 -2.79,5.22 -1.89,2.25 -4.95,3.6 -2.97,1.26 -7.11,1.26 l -26.01,0 q -8.37,0 -8.37,-8.91 l 0,-45.63 z" />
                        <path className={styles['title-letter']}
                            d="m 325.06391,271.63501 0,0 z m 8.73,0 q -8.73,0 -8.73,-8.82 l 0,-46.08 q 0,-4.32 2.61,-6.48 2.61,-2.25 6.12,-2.25 3.42,0 6.03,2.25 2.61,2.25 2.61,6.48 l 0,37.26 17.82,0 q 4.05,0 6.12,2.61 2.16,2.61 2.16,6.21 0,3.69 -2.16,6.3 -2.07,2.52 -6.12,2.52 l -26.46,0 z" />
                        <path className={styles['title-letter']}
                            d="m 371.02016,271.63501 0,0 z m 60.75,-20.43 q 0,10.26 -4.95,15.39 -4.95,5.04 -14.67,5.04 l -21.51,0 q -9.72,0 -14.67,-5.04 -4.95,-5.13 -4.95,-15.39 l 0,-22.5 q 0,-10.26 4.95,-15.3 4.95,-5.13 14.67,-5.13 l 21.51,0 q 9.72,0 14.67,5.13 4.95,5.04 4.95,15.3 l 0,22.5 z m -40.59,-25.2 q -1.26,0 -1.98,0.63 -0.72,0.54 -0.72,1.8 l 0,22.77 q 0,2.61 2.7,2.61 l 20.43,0 q 2.61,0 2.61,-2.61 l 0,-22.5 q 0,-2.7 -2.61,-2.7 l -20.43,0 z" />
                        <path className={styles['title-letter']}
                            d="m 438.16859,271.63501 0,0 z m 19.62,0 q -9.72,0 -14.67,-5.04 -4.95,-5.13 -4.95,-15.39 l 0,-22.5 q 0,-10.26 4.95,-15.3 4.95,-5.13 14.67,-5.13 l 29.16,0 q 5.67,0 8.19,2.25 2.52,2.16 2.52,6.75 0,4.59 -2.52,6.66 -2.52,2.07 -8.19,2.07 l -28.71,0 q -2.52,0 -2.61,2.43 l 0,22.77 q 0,2.61 2.61,2.61 l 28.98,0 q 5.67,0 8.01,2.25 2.43,2.16 2.43,6.66 0,4.59 -2.43,6.75 -2.34,2.16 -8.01,2.16 l -29.43,0 z" />
                        <path className={styles['title-letter']}
                            d="m 503.65766,271.63501 0,0 z m 17.46,-8.37 q 0,4.32 -2.61,6.57 -2.61,2.16 -6.12,2.16 -3.6,0 -6.21,-2.16 -2.52,-2.25 -2.52,-6.57 l 0,-46.62 q 0,-4.14 2.52,-6.39 2.61,-2.25 6.21,-2.25 3.51,0 6.12,2.25 2.61,2.25 2.61,6.39 l 0,14.94 14.31,-20.25 q 1.17,-1.71 2.7,-2.52 1.62,-0.81 4.05,-0.81 4.32,0 6.66,2.52 2.43,2.43 2.43,6.21 0,3.24 -1.98,5.49 l -14.67,16.56 14.76,18.9 q 2.07,2.61 2.07,5.49 0,4.05 -2.52,6.48 -2.52,2.34 -6.57,2.34 -1.98,0 -3.78,-0.81 -1.71,-0.81 -2.97,-2.61 l -14.49,-20.25 0,14.94 z" />
                    </g>

                </g>

                {/* Play button */}
                <g className={styles['title-play-button']} onClick={this.startOutroAnimation}>
                    <path className={styles['title-play-path']} style={{ fill: '#06c' }}
                        d="M 376.76423,371.18643 A 56.764237,56.764237 0 0 1 320,427.95066 56.764237,56.764237 0 0 1 263.23577,371.18643 56.764237,56.764237 0 0 1 320,314.4222 a 56.764237,56.764237 0 0 1 56.76423,56.76423 z" />
                    <path className={styles['title-play-path']} style={{ fill: '#dcb164' }}
                        d="m 296.37508,338.49432 0,68.15442 58.56285,-33.81127 z" />
                </g>

            </svg>
        );
    };

};